Use drm_poll instead of libc version (see: libdrm -> ioctl_dispatch.cc)

--- a/src/gallium/drivers/etnaviv/etnaviv_fence.c
+++ b/src/gallium/drivers/etnaviv/etnaviv_fence.c
@@ -25,7 +25,14 @@
  *    Rob Clark <robclark@freedesktop.org>
  */
 
+/*
+ * On Genode make sure to use patched Mesa version not libdrm version
+ */
+#ifdef __GENODE__
+#include "util/libsync.h"
+#else
 #include <libsync.h>
+#endif
 
 #include "etnaviv_fence.h"
 #include "etnaviv_context.h"
--- a/src/gallium/drivers/lima/lima_fence.c
+++ b/src/gallium/drivers/lima/lima_fence.c
@@ -23,7 +23,15 @@
  */
 
 #include <fcntl.h>
+
+/*
+ * On Genode make sure to use patched Mesa version not libdrm version
+ */
+#ifdef __GENODE__
+#include "util/libsync.h"
+#else
 #include <libsync.h>
+#endif
 
 #include "util/os_file.h"
 #include <util/u_memory.h>
--- a/src/util/libsync.h
+++ b/src/util/libsync.h
@@ -98,6 +98,7 @@ struct sync_file_info {
 #define SYNC_IOC_FILE_INFO	_IOWR(SYNC_IOC_MAGIC, 4, struct sync_file_info)
 #endif
 
+extern int drm_poll(struct pollfd *, nfds_t, int);
 
 static inline int sync_wait(int fd, int timeout)
 {
@@ -110,7 +111,7 @@ static inline int sync_wait(int fd, int timeout)
 
 	do {
 		clock_gettime(CLOCK_MONOTONIC, &poll_start);
-		ret = poll(&fds, 1, timeout);
+		ret = drm_poll(&fds, 1, timeout);
 		clock_gettime(CLOCK_MONOTONIC, &poll_end);
 		if (ret > 0) {
 			if (fds.revents & (POLLERR | POLLNVAL)) {
